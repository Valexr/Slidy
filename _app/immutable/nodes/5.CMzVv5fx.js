import{h as N,a as P,t as R}from"../chunks/disclose-version.DV3n8o7h.js";import{i as j}from"../chunks/legacy.Bbih5N5V.js";import{ar as D,d as K,h as y,g as W,aB as G,x,u as L,L as E,K as H,aa as T,aC as q,aD as A,n as M,o as $,q as S,aw as U,m as V,am as F,p as J,a as O,$ as Q,c as X,r as Y,T as Z}from"../chunks/runtime.DZBvE2Ii.js";import{S as z,y as tt}from"../chunks/slidy.ZrdEVO-l.js";const b=0,_=1,k=2;function et(t,e,a,o,u){y&&W();var n=t,f=D(),d=F,r,c,h,s,m=(f?E:H)(void 0),p=(f?E:H)(void 0),g=!1;function v(i,w){g=!0,w&&(T(C),q(C),A(d));try{i===b&&a&&(c?M(c):c=$(()=>a(n))),i===_&&o&&(h?M(h):h=$(()=>o(n,m))),i===k&&u&&(s?M(s):s=$(()=>u(n,p))),i!==b&&c&&S(c,()=>c=null),i!==_&&h&&S(h,()=>h=null),i!==k&&s&&S(s,()=>s=null)}finally{w&&(A(null),q(null),T(null),U())}}var C=K(()=>{if(r!==(r=e())){if(G(r)){var i=r;g=!1,i.then(w=>{i===r&&(x(m,w),v(_,!0))},w=>{if(i===r)throw x(p,w),v(k,!0),p.v}),y||L(()=>{g||v(b,!0)})}else x(m,r),v(_,!1);return()=>r=null}});y&&(n=V)}const at=(t,e,a)=>Math.min(Math.max(t,e),a),nt=async({limit:t=5,width:e=window.innerWidth,height:a=window.innerHeight})=>{try{return await ot(t,{width:e,height:a})}catch(o){console.error(`Could not fetch photos: ${o}`)}};async function ot(t=9,e={width:window.innerWidth,height:window.innerHeight}){const a="https://raw.githubusercontent.com/Valexr/Slidy/master/assets/static/photos.json",o=Array.from({length:t},()=>Math.floor(Math.random()*24644));return(await(await fetch(a)).json()).reduce((d,[r,c,h],s)=>{if(o.includes(s)){const m={width:e.height*(c/10),height:e.height},p={width:e.width,height:e.height},g=`?w=${f(B(m,p).width)}`;d.push({id:s,src:`https://images.unsplash.com/photo-${r}${g}`,alt:`Image by ${h} from Unsplash`,...B(m,p)})}return d},[]);function f(d){return d*devicePixelRatio}}const B=(t,e)=>{const a=Math.min(e.width/t.width,e.height,t.height);return{width:Math.round(t.width*a),height:Math.round(t.height*a)}},I=!!globalThis.window,rt=(t,e=new Set)=>{const a=n=>(e.add(n),n(t),()=>{e.delete(n)}),o=n=>e.forEach(f=>f(n));return[a,n=>o(t=n(t))]},it=I&&matchMedia("(prefers-color-scheme: dark)").matches,[st,pt]=rt(it);st(t=>{I&&document.documentElement.setAttribute("scheme",t?"dark":"light")});let l=[];async function ct(t=10){l=await nt({limit:at(3,t,10)})}async function ht(t=10){return l!=null&&l.length||await ct(),l==null?void 0:l.sort(()=>.5-Math.random()).slice(0,t)}var ut=R('<main class="svelte-gogyl2"><!></main>');function wt(t,e){J(e,!1),j();var a=ut();N(u=>{Q.title="Slidy 3.1.0 - SvelteKit"});var o=X(a);et(o,()=>ht(10),null,(u,n)=>{z(u,{animation:tt,duration:450,gravity:1.45,snap:"center",thumbnail:!0,index:4,get slides(){return Z(n)},arrows:!0,loop:!0})}),Y(a),P(t,a),O()}export{wt as component};
