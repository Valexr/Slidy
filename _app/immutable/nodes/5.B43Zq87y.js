import{h as D,a as P,b as W}from"../chunks/disclose-version.aDxFXWT7.js";import"../chunks/legacy.C5qRRbfG.js";import{aD as j,m as q,n as y,p as F,aF as G,F as x,B as U,W as A,S as E,R as H,ar as N,aG as R,aH as T,y as M,z as S,A as b,az as K,x as L,c as V,a3 as Z,a5 as J,a6 as O,_ as Q,a0 as X,i as Y}from"../chunks/runtime.CITBsLGg.js";import{i as z}from"../chunks/lifecycle.BmR5OYlz.js";import{S as tt,y as et}from"../chunks/slidy.CzjKDVAo.js";const $=0,v=1,I=2;function at(t,e,a,i,u){y&&F();var n=t,f=j(),d=V,o=A,c,h,s,m=(f?E:H)(void 0),p=(f?E:H)(void 0),g=!1;function _(r,w){g=!0,w&&(N(k),R(k),T(d));try{r===$&&a&&(c?M(c):c=S(()=>a(n))),r===v&&i&&(h?M(h):h=S(()=>i(n,m))),r===I&&u&&(s?M(s):s=S(()=>u(n,p))),r!==$&&c&&b(c,()=>c=null),r!==v&&h&&b(h,()=>h=null),r!==I&&s&&b(s,()=>s=null)}finally{w&&(T(null),R(null),N(null),K())}}var k=q(()=>{if(o!==(o=e())){if(G(o)){var r=o;g=!1,r.then(w=>{r===o&&(x(m,w),_(v,!0))},w=>{if(r===o)throw x(p,w),_(I,!0),p.v}),y||U(()=>{g||_($,!0)})}else x(m,o),_(v,!1);return()=>o=A}});y&&(n=L)}const nt=(t,e,a)=>Math.min(Math.max(t,e),a),it=async({limit:t=5,width:e=window.innerWidth,height:a=window.innerHeight})=>{try{return await ot(t,{width:e,height:a})}catch(i){console.error(`Could not fetch photos: ${i}`)}};async function ot(t=9,e={width:window.innerWidth,height:window.innerHeight}){const a="https://raw.githubusercontent.com/Valexr/Slidy/master/assets/static/photos.json",i=Array.from({length:t},()=>Math.floor(Math.random()*24644));return(await(await fetch(a)).json()).reduce((d,[o,c,h],s)=>{if(i.includes(s)){const m={width:e.height*(c/10),height:e.height},p={width:e.width,height:e.height},g=`?w=${f(B(m,p).width)}`;d.push({id:s,src:`https://images.unsplash.com/photo-${o}${g}`,alt:`Image by ${h} from Unsplash`,...B(m,p)})}return d},[]);function f(d){return d*devicePixelRatio}}const B=(t,e)=>{const a=Math.min(e.width/t.width,e.height,t.height);return{width:Math.round(t.width*a),height:Math.round(t.height*a)}},C=!!globalThis.window,rt=(t,e=new Set)=>{const a=n=>(e.add(n),n(t),()=>{e.delete(n)}),i=n=>e.forEach(f=>f(n));return[a,n=>i(t=n(t))]},st=C&&matchMedia("(prefers-color-scheme: dark)").matches,[ct,gt]=rt(st);ct(t=>{C&&document.documentElement.setAttribute("scheme",t?"dark":"light")});let l=[];async function ht(t=10){l=await it({limit:nt(3,t,10)})}async function ut(t=10){return l!=null&&l.length||await ht(),l==null?void 0:l.sort(()=>.5-Math.random()).slice(0,t)}var lt=W('<main class="svelte-gogyl2"><!></main>');function _t(t,e){Z(e,!1),z();var a=lt();D(u=>{O.title="Slidy 3.1.0 - SvelteKit"});var i=Q(a);at(i,()=>ut(10),null,(u,n)=>{tt(u,{animation:et,duration:450,gravity:1.45,snap:"center",thumbnail:!0,index:4,get slides(){return Y(n)},arrows:!0,loop:!0})}),X(a),P(t,a),J()}export{_t as component};
