import{f as U,h as B,a as A}from"../chunks/BuwcqFT_.js";import"../chunks/BKOT0ftj.js";import{au as G,w as K,y as v,A as O,aw as E,H as W,D as F,x as J,F as H,a3 as N,R as S,U as R,T as k,K as M,O as V,G as Y,ax as D,ay as L,az as q,b as Z,J as C,L as b,aq as Q,p as X,a as z,a9 as tt,c as et,o as at,r as nt}from"../chunks/Co7lrEDl.js";import{i as rt}from"../chunks/Dj5vZbS6.js";import{S as ot,y as it}from"../chunks/D_j9FlOu.js";const I=0,y=1,T=2;function st(t,a,n,o,h){v&&O();var e=t,l=G(),f=Z,r=N,s,c,d,m=(l?R:k)(void 0),w=(l?R:k)(void 0),g=!1;function _(i,p){g=!0,p&&(D($),L($),q(f));try{i===I&&n&&(s?C(s):s=M(()=>n(e))),i===y&&o&&(c?C(c):c=M(()=>o(e,m))),i!==I&&s&&b(s,()=>s=null),i!==y&&c&&b(c,()=>c=null),i!==T&&d&&b(d,()=>d=null)}finally{p&&(q(null),L(null),D(null),Q())}}var $=K(()=>{if(r===(r=a()))return;let i=v&&E(r)===(e.data===W);if(i&&(e=F(),J(e),H(!1),i=!0),E(r)){var p=r;g=!1,p.then(x=>{p===r&&(S(m,x),_(y,!0))},x=>{if(p===r)throw S(w,x),_(T,!0),w.v}),v?n&&(s=M(()=>n(e))):V(()=>{g||_(I,!0)})}else S(m,r),_(y,!1);return i&&H(!0),()=>r=N});v&&(e=Y)}const ht=(t,a,n)=>Math.min(Math.max(t,a),n),ct=async({limit:t=5,width:a=window.innerWidth,height:n=window.innerHeight})=>{try{return await ut(t,{width:a,height:n})}catch(o){console.error(`Could not fetch photos: ${o}`)}};async function ut(t=9,a={width:window.innerWidth,height:window.innerHeight}){const n="https://raw.githubusercontent.com/Valexr/Slidy/master/assets/static/photos.json",o=Array.from({length:t},()=>Math.floor(Math.random()*24644));return(await(await fetch(n)).json()).reduce((f,[r,s,c],d)=>{if(o.includes(d)){const m={width:a.height*(s/10),height:a.height},w={width:a.width,height:a.height},g=`?w=${l(P(m,w).width)}`;f.push({id:d,src:`https://images.unsplash.com/photo-${r}${g}`,alt:`Image by ${c} from Unsplash`,...P(m,w)})}return f},[]);function l(f){return f*devicePixelRatio}}const P=(t,a)=>{const n=Math.min(a.width/t.width,a.height,t.height);return{width:Math.round(t.width*n),height:Math.round(t.height*n)}},j=!!globalThis.window,lt=(t,a=new Set)=>{const n=e=>(a.add(e),e(t),()=>{a.delete(e)}),o=e=>a.forEach(l=>l(e));return[n,e=>o(t=e(t))]},ft=j&&matchMedia("(prefers-color-scheme: dark)").matches,[dt,Mt]=lt(ft);dt(t=>{j&&document.documentElement.setAttribute("scheme",t?"dark":"light")});let u=[];async function mt(t=10){u=await ct({limit:ht(3,t,10)})}async function pt(t=10){return u!=null&&u.length||await mt(),u==null?void 0:u.sort(()=>.5-Math.random()).slice(0,t)}var wt=U('<h1 class="svelte-ghm1hp">Loading slides...</h1>'),gt=U('<main class="svelte-ghm1hp"><!></main>');function bt(t,a){X(a,!1),rt();var n=gt();B(h=>{tt.title="Slidy 3.1.0 - SvelteKit"});var o=et(n);st(o,()=>pt(10),h=>{var e=wt();A(h,e)},(h,e)=>{ot(h,{animation:it,duration:450,gravity:1.45,snap:"center",thumbnail:!0,index:4,get slides(){return at(e)},arrows:!0,loop:!0})}),nt(n),A(t,n),z()}export{bt as component};
