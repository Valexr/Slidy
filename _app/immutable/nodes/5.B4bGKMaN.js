import"../chunks/Bzak7iHL.js";import"../chunks/DnXg8h6h.js";import{aR as U,O as B,R as v,T as O,aT as E,W as V,X as Y,Q as Z,Y as R,am as k,a5 as S,a7 as A,a6 as N,a0 as M,ad as G,Z as K,aU as H,aV as j,aW as L,i as Q,a9 as W,aa as T,q as X,p as F,f as D,au as J,b as q,c as z,av as tt,d as et,L as at,r as nt}from"../chunks/DMrEJXvD.js";import{i as rt}from"../chunks/BE1Ufy2K.js";import{S as it,y as st}from"../chunks/BZXwGUcH.js";const b=0,y=1,I=2;function ot(t,a,n,i,h){v&&O();var e=t,l=U(),f=Q,r=k,o,c,d,m=l?A(void 0):N(void 0,!1,!1),w=l?A(void 0):N(void 0,!1,!1),_=!1;function g(s,p){_=!0,p&&(H($),j($),L(f));try{s===b&&n&&(o?W(o):o=M(()=>n(e))),s===y&&i&&(c?W(c):c=M(()=>i(e,m))),s!==b&&o&&T(o,()=>o=null),s!==y&&c&&T(c,()=>c=null),s!==I&&d&&T(d,()=>d=null)}finally{p&&(L(null),j(null),H(null),X())}}var $=B(()=>{if(r===(r=a()))return;let s=v&&E(r)===(e.data===V);if(s&&(e=Y(),Z(e),R(!1),s=!0),E(r)){var p=r;_=!1,p.then(x=>{p===r&&(S(m,x),g(y,!0))},x=>{if(p===r)throw S(w,x),g(I,!0),w.v}),v?n&&(o=M(()=>n(e))):G(()=>{_||g(b,!0)})}else S(m,r),g(y,!1);return s&&R(!0),()=>r=k});v&&(e=K)}const ht=(t,a,n)=>Math.min(Math.max(t,a),n),ct=async({limit:t=5,width:a=window.innerWidth,height:n=window.innerHeight})=>{try{return await ut(t,{width:a,height:n})}catch(i){console.error(`Could not fetch photos: ${i}`)}};async function ut(t=9,a={width:window.innerWidth,height:window.innerHeight}){const n="https://raw.githubusercontent.com/Valexr/Slidy/master/assets/static/photos.json",i=Array.from({length:t},()=>Math.floor(Math.random()*24644));return(await(await fetch(n)).json()).reduce((f,[r,o,c],d)=>{if(i.includes(d)){const m={width:a.height*(o/10),height:a.height},w={width:a.width,height:a.height},_=`?w=${l(C(m,w).width)}`;f.push({id:d,src:`https://images.unsplash.com/photo-${r}${_}`,alt:`Image by ${c} from Unsplash`,...C(m,w)})}return f},[]);function l(f){return f*devicePixelRatio}}const C=(t,a)=>{const n=Math.min(a.width/t.width,a.height,t.height);return{width:Math.round(t.width*n),height:Math.round(t.height*n)}},P=!!globalThis.window,lt=(t,a=new Set)=>{const n=e=>(a.add(e),e(t),()=>{a.delete(e)}),i=e=>a.forEach(l=>l(e));return[n,e=>i(t=e(t))]},ft=P&&matchMedia("(prefers-color-scheme: dark)").matches,[dt]=lt(ft);dt(t=>{P&&document.documentElement.setAttribute("scheme",t?"dark":"light")});let u=[];async function mt(t=10){u=await ct({limit:ht(3,t,10)})}async function pt(t=10){return u!=null&&u.length||await mt(),u==null?void 0:u.sort(()=>.5-Math.random()).slice(0,t)}var wt=D('<h1 class="svelte-j6hxly">Loading slides...</h1>'),_t=D('<main class="svelte-j6hxly"><!></main>');function Mt(t,a){F(a,!1),rt();var n=_t();J(h=>{tt.title="Slidy 3.1.0 - SvelteKit"});var i=et(n);ot(i,()=>pt(10),h=>{var e=wt();q(h,e)},(h,e)=>{it(h,{get animation(){return st},duration:450,gravity:1.45,snap:"center",thumbnail:!0,index:4,get slides(){return at(e)},arrows:!0,loop:!0})}),nt(n),q(t,n),z()}export{Mt as component};
