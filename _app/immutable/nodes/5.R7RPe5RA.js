import{t as C,h as L,b as P}from"../chunks/D8NRNh33.js";import"../chunks/6FmMA93Z.js";import{aw as j,m as U,o as v,q as W,ay as I,H as G,v as J,n as K,w as E,X as T,J as S,M as H,L as N,D as O,x as V,az as k,aA as R,aB as B,c as X,z as Y,A as Z,B as M,at as F,a7 as Q,a8 as z,a5 as tt,$ as et,i as at,a1 as nt}from"../chunks/BGpqryMg.js";import{i as ot}from"../chunks/B0VKVcLz.js";import{S as it,y as rt}from"../chunks/BYUBKbjp.js";const $=0,y=1,b=2;function st(t,e,a,i,h){v&&W();var n=t,u=j(),l=X,o=T,p,s,d,f=(u?H:N)(void 0),w=(u?H:N)(void 0),g=!1;function _(r,m){g=!0,m&&(k(A),R(A),B(l));try{r===y&&i&&(s?Y(s):s=Z(()=>i(n,f))),r!==$&&p&&M(p,()=>p=null),r!==y&&s&&M(s,()=>s=null),r!==b&&d&&M(d,()=>d=null)}finally{m&&(B(null),R(null),k(null),F())}}var A=U(()=>{if(o===(o=e()))return;let r=v&&I(o)===(n.data===G);if(r&&(n=J(),K(n),E(!1),r=!0),I(o)){var m=o;g=!1,m.then(x=>{m===o&&(S(f,x),_(y,!0))},x=>{if(m===o)throw S(w,x),_(b,!0),w.v}),v||O(()=>{g||_($,!0)})}else S(f,o),_(y,!1);return r&&E(!0),()=>o=T});v&&(n=V)}const ct=(t,e,a)=>Math.min(Math.max(t,e),a),ht=async({limit:t=5,width:e=window.innerWidth,height:a=window.innerHeight})=>{try{return await ut(t,{width:e,height:a})}catch(i){console.error(`Could not fetch photos: ${i}`)}};async function ut(t=9,e={width:window.innerWidth,height:window.innerHeight}){const a="https://raw.githubusercontent.com/Valexr/Slidy/master/assets/static/photos.json",i=Array.from({length:t},()=>Math.floor(Math.random()*24644));return(await(await fetch(a)).json()).reduce((l,[o,p,s],d)=>{if(i.includes(d)){const f={width:e.height*(p/10),height:e.height},w={width:e.width,height:e.height},g=`?w=${u(D(f,w).width)}`;l.push({id:d,src:`https://images.unsplash.com/photo-${o}${g}`,alt:`Image by ${s} from Unsplash`,...D(f,w)})}return l},[]);function u(l){return l*devicePixelRatio}}const D=(t,e)=>{const a=Math.min(e.width/t.width,e.height,t.height);return{width:Math.round(t.width*a),height:Math.round(t.height*a)}},q=!!globalThis.window,lt=(t,e=new Set)=>{const a=n=>(e.add(n),n(t),()=>{e.delete(n)}),i=n=>e.forEach(u=>u(n));return[a,n=>i(t=n(t))]},dt=q&&matchMedia("(prefers-color-scheme: dark)").matches,[ft,St]=lt(dt);ft(t=>{q&&document.documentElement.setAttribute("scheme",t?"dark":"light")});let c=[];async function mt(t=10){c=await ht({limit:ct(3,t,10)})}async function pt(t=10){return c!=null&&c.length||await mt(),c==null?void 0:c.sort(()=>.5-Math.random()).slice(0,t)}var wt=C('<main class="svelte-gogyl2"><!></main>');function Mt(t,e){Q(e,!1),ot();var a=wt();L(h=>{tt.title="Slidy 3.1.0 - SvelteKit"});var i=et(a);st(i,()=>pt(10),null,(h,n)=>{it(h,{animation:rt,duration:450,gravity:1.45,snap:"center",thumbnail:!0,index:4,get slides(){return at(n)},arrows:!0,loop:!0})}),nt(a),P(t,a),z()}export{Mt as component};
