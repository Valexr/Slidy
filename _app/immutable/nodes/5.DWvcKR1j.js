import{t as q,h as K,a as A}from"../chunks/DAMNgkwm.js";import"../chunks/C3IaZYxX.js";import{at as U,w as W,y as _,A as F,av as E,H as G,C as J,x as O,D as N,a2 as H,Q as S,T as k,S as R,J as I,N as Q,F as V,aw as C,ax as D,ay as L,b as Y,I as P,K as M,ap as Z,p as X,a as z,a8 as tt,c as et,o as at,r as nt}from"../chunks/C0DNvG3q.js";import{i as rt}from"../chunks/DsqHRecZ.js";import{S as ot,y as it}from"../chunks/BPwtkkBj.js";const b=0,y=1,T=2;function st(t,a,n,o,h){_&&F();var e=t,l=U(),d=Y,r=H,s,c,f,m=(l?k:R)(void 0),w=(l?k:R)(void 0),g=!1;function v(i,p){g=!0,p&&(C($),D($),L(d));try{i===b&&n&&(s?P(s):s=I(()=>n(e))),i===y&&o&&(c?P(c):c=I(()=>o(e,m))),i!==b&&s&&M(s,()=>s=null),i!==y&&c&&M(c,()=>c=null),i!==T&&f&&M(f,()=>f=null)}finally{p&&(L(null),D(null),C(null),Z())}}var $=W(()=>{if(r===(r=a()))return;let i=_&&E(r)===(e.data===G);if(i&&(e=J(),O(e),N(!1),i=!0),E(r)){var p=r;g=!1,p.then(x=>{p===r&&(S(m,x),v(y,!0))},x=>{if(p===r)throw S(w,x),v(T,!0),w.v}),_?n&&(s=I(()=>n(e))):Q(()=>{g||v(b,!0)})}else S(m,r),v(y,!1);return i&&N(!0),()=>r=H});_&&(e=V)}const ht=(t,a,n)=>Math.min(Math.max(t,a),n),ct=async({limit:t=5,width:a=window.innerWidth,height:n=window.innerHeight})=>{try{return await ut(t,{width:a,height:n})}catch(o){console.error(`Could not fetch photos: ${o}`)}};async function ut(t=9,a={width:window.innerWidth,height:window.innerHeight}){const n="https://raw.githubusercontent.com/Valexr/Slidy/master/assets/static/photos.json",o=Array.from({length:t},()=>Math.floor(Math.random()*24644));return(await(await fetch(n)).json()).reduce((d,[r,s,c],f)=>{if(o.includes(f)){const m={width:a.height*(s/10),height:a.height},w={width:a.width,height:a.height},g=`?w=${l(j(m,w).width)}`;d.push({id:f,src:`https://images.unsplash.com/photo-${r}${g}`,alt:`Image by ${c} from Unsplash`,...j(m,w)})}return d},[]);function l(d){return d*devicePixelRatio}}const j=(t,a)=>{const n=Math.min(a.width/t.width,a.height,t.height);return{width:Math.round(t.width*n),height:Math.round(t.height*n)}},B=!!globalThis.window,lt=(t,a=new Set)=>{const n=e=>(a.add(e),e(t),()=>{a.delete(e)}),o=e=>a.forEach(l=>l(e));return[n,e=>o(t=e(t))]},dt=B&&matchMedia("(prefers-color-scheme: dark)").matches,[ft,It]=lt(dt);ft(t=>{B&&document.documentElement.setAttribute("scheme",t?"dark":"light")});let u=[];async function mt(t=10){u=await ct({limit:ht(3,t,10)})}async function pt(t=10){return u!=null&&u.length||await mt(),u==null?void 0:u.sort(()=>.5-Math.random()).slice(0,t)}var wt=q('<h1 class="svelte-ghm1hp">Loading slides...</h1>'),gt=q('<main class="svelte-ghm1hp"><!></main>');function Mt(t,a){X(a,!1),rt();var n=gt();K(h=>{tt.title="Slidy 3.1.0 - SvelteKit"});var o=et(n);st(o,()=>pt(10),h=>{var e=wt();A(h,e)},(h,e)=>{ot(h,{animation:it,duration:450,gravity:1.45,snap:"center",thumbnail:!0,index:4,get slides(){return at(e)},arrows:!0,loop:!0})}),nt(n),A(t,n),z()}export{Mt as component};
