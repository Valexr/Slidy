import{S as $,i as M,s as S,a3 as x,a as I,k as j,T as A,h as c,c as E,l as q,m as C,n as P,b as p,a4 as R,f,t as g,A as i,v as B,w as T,x as F,y as K}from"../../../chunks/index-7c52a698.js";import{S as N,F as U}from"../../../chunks/slidy-2a58411b.js";const V=(t,e)=>Math.floor(Math.random()*(e-t+1))+t,D=(t,e,a)=>Math.min(Math.max(t,e),a),G=async({limit:t=5,page:e=1,width:a=1280,height:o=800})=>{let s=[];try{s=await H(t,{width:a,height:o})}catch(n){console.error(`Could not fetch photos: ${n}`)}return s.map(n=>{const r=h({width:n.width,height:n.height},{width:a,height:o});return{id:n.id,...r,alt:`Image by ${n.author}`,src:n.src}})};async function H(t=9,e={width:1280,height:800}){const a="https://raw.githubusercontent.com/Valexr/Slidy/master/assets/static/photos.json",o=Array.from({length:t},()=>Math.floor(Math.random()*24699));return(await(await fetch(a)).json()).reduce((l,[w,y,b],k)=>{if(o.includes(k)){const d={width:e.height*y,height:e.height},m={width:e.width,height:e.height},v=`?w=${r(h(d,m).width)}`;l.push({src:`https://images.unsplash.com/photo-${w}${v}`,alt:`Image by ${b} from Unsplash`,...h(d,m)})}return l},[]);function r(l){return l*devicePixelRatio}}const h=(t,e)=>{const a=Math.min(e.width/t.width,e.height,t.height);return{width:Math.round(t.width*a),height:Math.round(t.height*a)}},_=Boolean(globalThis.window),J=(t,e=new Set)=>{const a=n=>(e.add(n),n(t),()=>(e.delete(n),void 0)),o=n=>e.forEach(r=>r(n));return[a,n=>o(t=n(t))]},L=_&&matchMedia("(prefers-color-scheme: dark)").matches,[O,nt]=J(L);O(t=>{!_||document.documentElement.setAttribute("scheme",t?"dark":"light")});let u=[];async function Q(t=10){u=await G({limit:D(3,t,10),page:V(0,100)})}async function W(t=10){return u.length||await Q(),u.sort(()=>.5-Math.random()).slice(0,t)}function X(t){return{c:i,l:i,m:i,p:i,i,o:i,d:i}}function Y(t){let e,a;return e=new N({props:{animation:U,duration:450,gravity:1.45,snap:"center",thumbnail:!0,index:4,slides:t[0],arrows:!0}}),{c(){B(e.$$.fragment)},l(o){T(e.$$.fragment,o)},m(o,s){F(e,o,s),a=!0},p:i,i(o){a||(f(e.$$.fragment,o),a=!0)},o(o){g(e.$$.fragment,o),a=!1},d(o){K(e,o)}}}function Z(t){return{c:i,l:i,m:i,p:i,i,o:i,d:i}}function z(t){let e,a,o,s={ctx:t,current:null,token:null,hasCatch:!1,pending:Z,then:Y,catch:X,value:0,blocks:[,,,]};return x(W(10),s),{c(){e=I(),a=j("main"),s.block.c(),this.h()},l(n){A('[data-svelte="svelte-r068pv"]',document.head).forEach(c),e=E(n),a=q(n,"MAIN",{class:!0});var l=C(a);s.block.l(l),l.forEach(c),this.h()},h(){document.title="Slidy 3.1.0 - SvelteKit",P(a,"class","svelte-gogyl2")},m(n,r){p(n,e,r),p(n,a,r),s.block.m(a,s.anchor=null),s.mount=()=>a,s.anchor=null,o=!0},p(n,[r]){t=n,R(s,t,r)},i(n){o||(f(s.block),o=!0)},o(n){for(let r=0;r<3;r+=1){const l=s.blocks[r];g(l)}o=!1},d(n){n&&c(e),n&&c(a),s.block.d(),s.token=null,s=null}}}class at extends ${constructor(e){super(),M(this,e,null,z,S,{})}}export{at as default};
