import{S as v,i as S,s as $,a3 as M,a as x,k as I,T as A,h as c,c as E,l as j,m as q,n as C,b as p,a4 as N,f,t as g,A as i,v as P,w as R,x as B,y as J}from"../../../chunks/index-7c52a698.js";import{S as O,F as T}from"../../../chunks/slidy-8ac4e63e.js";const F=(e,n)=>Math.floor(Math.random()*(n-e+1))+e,K=(e,n,a)=>Math.min(Math.max(e,n),a),U=async({limit:e=5,page:n=1,width:a=1280,height:o=800})=>{let s=[];try{s=await V(e,{width:a,height:o})}catch(t){console.error(`Could not fetch photos: ${t}`)}return s.map(t=>{const r=h({width:t.width,height:t.height},{width:a,height:o});return{id:t.id,...r,alt:`Image by ${t.author}`,src:t.src}})};async function V(e=9,n={width:1280,height:800}){const a="https://raw.githubusercontent.com/Valexr/Slidy/master/assets/static/photos.json",o=Array.from({length:e},()=>Math.floor(Math.random()*24699));if(typeof window=="object"){let t=JSON.parse(sessionStorage.getItem("slidy_photos")||"[]");return t!=null&&t.length||(t=await(await fetch(a)).json(),sessionStorage.setItem("slidy_photos",JSON.stringify(t))),t.reduce((r,[l,w,y],b)=>{if(o.includes(b)){const d={width:n.height*w,height:n.height},m={width:n.width,height:n.height},k=`?w=${s(h(d,m).width)}`;r.push({src:`https://images.unsplash.com/photo-${l}${k}`,alt:`Image by ${y} from Unsplash`,...h(d,m)})}return r},[])}function s(t){return t*devicePixelRatio}}const h=(e,n)=>{const a=Math.min(n.width/e.width,n.height,e.height);return{width:Math.round(e.width*a),height:Math.round(e.height*a)}},_=Boolean(globalThis.window),D=(e,n=new Set)=>{const a=t=>(n.add(t),t(e),()=>(n.delete(t),void 0)),o=t=>n.forEach(r=>r(t));return[a,t=>o(e=t(e))]},G=_&&matchMedia("(prefers-color-scheme: dark)").matches,[H,et]=D(G);H(e=>{!_||document.documentElement.setAttribute("scheme",e?"dark":"light")});let u=[];async function L(e=10){u=await U({limit:K(3,e,10),page:F(0,100)})}async function Q(e=10){return u.length||await L(),u.sort(()=>.5-Math.random()).slice(0,e)}function W(e){return{c:i,l:i,m:i,p:i,i,o:i,d:i}}function X(e){let n,a;return n=new O({props:{animation:T,duration:450,gravity:1.45,snap:"center",thumbnail:!0,index:4,slides:e[0],arrows:!0}}),{c(){P(n.$$.fragment)},l(o){R(n.$$.fragment,o)},m(o,s){B(n,o,s),a=!0},p:i,i(o){a||(f(n.$$.fragment,o),a=!0)},o(o){g(n.$$.fragment,o),a=!1},d(o){J(n,o)}}}function Y(e){return{c:i,l:i,m:i,p:i,i,o:i,d:i}}function Z(e){let n,a,o,s={ctx:e,current:null,token:null,hasCatch:!1,pending:Y,then:X,catch:W,value:0,blocks:[,,,]};return M(Q(10),s),{c(){n=x(),a=I("main"),s.block.c(),this.h()},l(t){A('[data-svelte="svelte-r068pv"]',document.head).forEach(c),n=E(t),a=j(t,"MAIN",{class:!0});var l=q(a);s.block.l(l),l.forEach(c),this.h()},h(){document.title="Slidy 3.1.0 - SvelteKit",C(a,"class","svelte-gogyl2")},m(t,r){p(t,n,r),p(t,a,r),s.block.m(a,s.anchor=null),s.mount=()=>a,s.anchor=null,o=!0},p(t,[r]){e=t,N(s,e,r)},i(t){o||(f(s.block),o=!0)},o(t){for(let r=0;r<3;r+=1){const l=s.blocks[r];g(l)}o=!1},d(t){t&&c(n),t&&c(a),s.block.d(),s.token=null,s=null}}}class nt extends v{constructor(n){super(),S(this,n,null,Z,$,{})}}export{nt as default};
