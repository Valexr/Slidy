import{S as $,i as M,s as S,a3 as x,a as A,k as E,T as I,h as c,c as q,l as C,m as P,n as R,b as p,a4 as j,f as g,t as _,A as r,v as B,w as H,x as T,y as W}from"../../../chunks/index-7c52a698.js";import{S as F,F as K}from"../../../chunks/slidy-69fabf1c.js";const N=(t,e)=>Math.floor(Math.random()*(e-t+1))+t,U=(t,e,n)=>Math.min(Math.max(t,e),n),V=async({limit:t=5,width:e=window.innerWidth,height:n=window.innerHeight})=>{try{return await D(t,{width:e,height:n})}catch(o){console.error(`Could not fetch photos: ${o}`)}};async function D(t=9,e={width:window.innerWidth,height:window.innerHeight}){const n="https://raw.githubusercontent.com/Valexr/Slidy/master/assets/static/photos.json",o=Array.from({length:t},()=>Math.floor(Math.random()*24644));return(await(await fetch(n)).json()).reduce((l,[y,b,k],u)=>{if(o.includes(u)){const d={width:e.height*(b/10),height:e.height},m={width:e.width,height:e.height},v=`?w=${i(f(d,m).width)}`;l.push({id:u,src:`https://images.unsplash.com/photo-${y}${v}`,alt:`Image by ${k} from Unsplash`,...f(d,m)})}return l},[]);function i(l){return l*devicePixelRatio}}const f=(t,e)=>{const n=Math.min(e.width/t.width,e.height,t.height);return{width:Math.round(t.width*n),height:Math.round(t.height*n)}},w=Boolean(globalThis.window),G=(t,e=new Set)=>{const n=a=>(e.add(a),a(t),()=>(e.delete(a),void 0)),o=a=>e.forEach(i=>i(a));return[n,a=>o(t=a(t))]},J=w&&matchMedia("(prefers-color-scheme: dark)").matches,[L,nt]=G(J);L(t=>{!w||document.documentElement.setAttribute("scheme",t?"dark":"light")});let h=[];async function O(t=10){h=await V({limit:U(3,t,10),page:N(0,100)})}async function Q(t=10){return h.length||await O(),h.sort(()=>.5-Math.random()).slice(0,t)}function X(t){return{c:r,l:r,m:r,p:r,i:r,o:r,d:r}}function Y(t){let e,n;return e=new F({props:{animation:K,duration:450,gravity:1.45,snap:"center",thumbnail:!0,index:4,slides:t[0],arrows:!0}}),{c(){B(e.$$.fragment)},l(o){H(e.$$.fragment,o)},m(o,s){T(e,o,s),n=!0},p:r,i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){W(e,o)}}}function Z(t){return{c:r,l:r,m:r,p:r,i:r,o:r,d:r}}function z(t){let e,n,o,s={ctx:t,current:null,token:null,hasCatch:!1,pending:Z,then:Y,catch:X,value:0,blocks:[,,,]};return x(Q(10),s),{c(){e=A(),n=E("main"),s.block.c(),this.h()},l(a){I('[data-svelte="svelte-r068pv"]',document.head).forEach(c),e=q(a),n=C(a,"MAIN",{class:!0});var l=P(n);s.block.l(l),l.forEach(c),this.h()},h(){document.title="Slidy 3.1.0 - SvelteKit",R(n,"class","svelte-gogyl2")},m(a,i){p(a,e,i),p(a,n,i),s.block.m(n,s.anchor=null),s.mount=()=>n,s.anchor=null,o=!0},p(a,[i]){t=a,j(s,t,i)},i(a){o||(g(s.block),o=!0)},o(a){for(let i=0;i<3;i+=1){const l=s.blocks[i];_(l)}o=!1},d(a){a&&c(e),a&&c(n),s.block.d(),s.token=null,s=null}}}class at extends ${constructor(e){super(),M(this,e,null,z,S,{})}}export{at as default};
