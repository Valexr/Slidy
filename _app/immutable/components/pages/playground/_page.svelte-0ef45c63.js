import{S as $,i as M,s as S,a3 as x,a as A,k as E,T as q,h,c as C,l as I,m as P,n as R,b as p,a4 as j,f as g,t as _,A as s,v as B,w as H,x as T,y as W}from"../../../chunks/index-7c52a698.js";import{S as F,F as K}from"../../../chunks/slidy-4b48f87a.js";const N=(e,t,n)=>Math.min(Math.max(e,t),n),U=async({limit:e=5,width:t=window.innerWidth,height:n=window.innerHeight})=>{try{return await V(e,{width:t,height:n})}catch(o){console.error(`Could not fetch photos: ${o}`)}};async function V(e=9,t={width:window.innerWidth,height:window.innerHeight}){const n="https://raw.githubusercontent.com/Valexr/Slidy/master/assets/static/photos.json",o=Array.from({length:e},()=>Math.floor(Math.random()*24644));return(await(await fetch(n)).json()).reduce((c,[y,b,k],u)=>{if(o.includes(u)){const d={width:t.height*(b/10),height:t.height},m={width:t.width,height:t.height},v=`?w=${i(f(d,m).width)}`;c.push({id:u,src:`https://images.unsplash.com/photo-${y}${v}`,alt:`Image by ${k} from Unsplash`,...f(d,m)})}return c},[]);function i(c){return c*devicePixelRatio}}const f=(e,t)=>{const n=Math.min(t.width/e.width,t.height,e.height);return{width:Math.round(e.width*n),height:Math.round(e.height*n)}},w=Boolean(globalThis.window),D=(e,t=new Set)=>{const n=a=>(t.add(a),a(e),()=>(t.delete(a),void 0)),o=a=>t.forEach(i=>i(a));return[n,a=>o(e=a(e))]},G=w&&matchMedia("(prefers-color-scheme: dark)").matches,[J,et]=D(G);J(e=>{!w||document.documentElement.setAttribute("scheme",e?"dark":"light")});let l=[];async function L(e=10){l=await U({limit:N(3,e,10)})}async function O(e=10){return l!=null&&l.length||await L(),l==null?void 0:l.sort(()=>.5-Math.random()).slice(0,e)}function Q(e){return{c:s,l:s,m:s,p:s,i:s,o:s,d:s}}function X(e){let t,n;return t=new F({props:{animation:K,duration:450,gravity:1.45,snap:"center",thumbnail:!0,index:4,slides:e[0],arrows:!0}}),{c(){B(t.$$.fragment)},l(o){H(t.$$.fragment,o)},m(o,r){T(t,o,r),n=!0},p:s,i(o){n||(g(t.$$.fragment,o),n=!0)},o(o){_(t.$$.fragment,o),n=!1},d(o){W(t,o)}}}function Y(e){return{c:s,l:s,m:s,p:s,i:s,o:s,d:s}}function Z(e){let t,n,o,r={ctx:e,current:null,token:null,hasCatch:!1,pending:Y,then:X,catch:Q,value:0,blocks:[,,,]};return x(O(10),r),{c(){t=A(),n=E("main"),r.block.c(),this.h()},l(a){q('[data-svelte="svelte-r068pv"]',document.head).forEach(h),t=C(a),n=I(a,"MAIN",{class:!0});var c=P(n);r.block.l(c),c.forEach(h),this.h()},h(){document.title="Slidy 3.1.0 - SvelteKit",R(n,"class","svelte-gogyl2")},m(a,i){p(a,t,i),p(a,n,i),r.block.m(n,r.anchor=null),r.mount=()=>n,r.anchor=null,o=!0},p(a,[i]){e=a,j(r,e,i)},i(a){o||(g(r.block),o=!0)},o(a){for(let i=0;i<3;i+=1){const c=r.blocks[i];_(c)}o=!1},d(a){a&&h(t),a&&h(n),r.block.d(),r.token=null,r=null}}}class nt extends ${constructor(t){super(),M(this,t,null,Z,S,{})}}export{nt as default};
