import{S as $,i as M,s as S,a3 as x,a as A,k as E,T as I,h as c,c as q,l as C,m as P,n as R,b as g,a4 as j,f as w,t as _,A as r,v as B,w as H,x as T,y as W}from"../../../chunks/index-7c52a698.js";import{S as F,F as K}from"../../../chunks/slidy-5f7f96fd.js";const N=(e,t)=>Math.floor(Math.random()*(t-e+1))+e,U=(e,t,n)=>Math.min(Math.max(e,t),n),V=async({limit:e=5,width:t=window.innerWidth,height:n=window.innerHeight})=>{let s=[];try{s=await D(e,{width:t,height:n})}catch(a){console.error(`Could not fetch photos: ${a}`)}return s.map(a=>{const o=h({width:a.width,height:a.height},{width:t,height:n});return{id:a.id,...o,alt:a.alt,src:a.src}})};async function D(e=9,t={width:window.innerWidth,height:window.innerHeight}){const n="https://raw.githubusercontent.com/Valexr/Slidy/master/assets/static/photos.json",s=Array.from({length:e},()=>Math.floor(Math.random()*24644));return(await(await fetch(n)).json()).reduce((l,[b,k,u],m)=>{if(s.includes(m)){const p={width:t.height*(k/10),height:t.height},f={width:t.width,height:t.height},v=`?w=${i(h(p,f).width)}`;console.log(u),l.push({id:m,src:`https://images.unsplash.com/photo-${b}${v}`,alt:`Image by ${u} from Unsplash`,...h(p,f)})}return l},[]);function i(l){return l*devicePixelRatio}}const h=(e,t)=>{const n=Math.min(t.width/e.width,t.height,e.height);return{width:Math.round(e.width*n),height:Math.round(e.height*n)}},y=Boolean(globalThis.window),G=(e,t=new Set)=>{const n=o=>(t.add(o),o(e),()=>(t.delete(o),void 0)),s=o=>t.forEach(i=>i(o));return[n,o=>s(e=o(e))]},J=y&&matchMedia("(prefers-color-scheme: dark)").matches,[L,nt]=G(J);L(e=>{!y||document.documentElement.setAttribute("scheme",e?"dark":"light")});let d=[];async function O(e=10){d=await V({limit:U(3,e,10),page:N(0,100)})}async function Q(e=10){return d.length||await O(),d.sort(()=>.5-Math.random()).slice(0,e)}function X(e){return{c:r,l:r,m:r,p:r,i:r,o:r,d:r}}function Y(e){let t,n;return t=new F({props:{animation:K,duration:450,gravity:1.45,snap:"center",thumbnail:!0,index:4,slides:e[0],arrows:!0}}),{c(){B(t.$$.fragment)},l(s){H(t.$$.fragment,s)},m(s,a){T(t,s,a),n=!0},p:r,i(s){n||(w(t.$$.fragment,s),n=!0)},o(s){_(t.$$.fragment,s),n=!1},d(s){W(t,s)}}}function Z(e){return{c:r,l:r,m:r,p:r,i:r,o:r,d:r}}function z(e){let t,n,s,a={ctx:e,current:null,token:null,hasCatch:!1,pending:Z,then:Y,catch:X,value:0,blocks:[,,,]};return x(Q(10),a),{c(){t=A(),n=E("main"),a.block.c(),this.h()},l(o){I('[data-svelte="svelte-r068pv"]',document.head).forEach(c),t=q(o),n=C(o,"MAIN",{class:!0});var l=P(n);a.block.l(l),l.forEach(c),this.h()},h(){document.title="Slidy 3.1.0 - SvelteKit",R(n,"class","svelte-gogyl2")},m(o,i){g(o,t,i),g(o,n,i),a.block.m(n,a.anchor=null),a.mount=()=>n,a.anchor=null,s=!0},p(o,[i]){e=o,j(a,e,i)},i(o){s||(w(a.block),s=!0)},o(o){for(let i=0;i<3;i+=1){const l=a.blocks[i];_(l)}s=!1},d(o){o&&c(t),o&&c(n),a.block.d(),a.token=null,a=null}}}class at extends ${constructor(t){super(),M(this,t,null,z,S,{})}}export{at as default};
