import{S as $,i as M,s as S,a3 as x,a as I,k as A,T as E,h as c,c as q,l as C,m as P,n as R,b as p,a4 as j,f,t as g,A as i,v as B,w as T,x as F,y as K}from"../../../chunks/index-7c52a698.js";import{S as N,F as U}from"../../../chunks/slidy-44c2ba58.js";const V=(t,e)=>Math.floor(Math.random()*(e-t+1))+t,D=(t,e,n)=>Math.min(Math.max(t,e),n),G=async({limit:t=5,page:e=1,width:n=1280,height:o=800})=>{let s=[];try{s=await H(t,{width:n,height:o})}catch(a){console.error(`Could not fetch photos: ${a}`)}return s.map(a=>{const r=h({width:a.width,height:a.height},{width:n,height:o});return{id:a.id,...r,alt:`Image by ${a.author}`,src:a.src}})};async function H(t=9,e={width:1280,height:800}){const n="https://raw.githubusercontent.com/Valexr/Slidy/master/assets/static/photos.json",o=Array.from({length:t},()=>Math.floor(Math.random()*24644));return(await(await fetch(n)).json()).reduce((l,[w,y,b],k)=>{if(o.includes(k)){const d={width:e.height*(y/10),height:e.height},m={width:e.width,height:e.height},v=`?w=${r(h(d,m).width)}`;l.push({src:`https://images.unsplash.com/photo-${w}${v}`,alt:`Image by ${b} from Unsplash`,...h(d,m)})}return l},[]);function r(l){return l*devicePixelRatio}}const h=(t,e)=>{const n=Math.min(e.width/t.width,e.height,t.height);return{width:Math.round(t.width*n),height:Math.round(t.height*n)}},_=Boolean(globalThis.window),J=(t,e=new Set)=>{const n=a=>(e.add(a),a(t),()=>(e.delete(a),void 0)),o=a=>e.forEach(r=>r(a));return[n,a=>o(t=a(t))]},L=_&&matchMedia("(prefers-color-scheme: dark)").matches,[O,at]=J(L);O(t=>{!_||document.documentElement.setAttribute("scheme",t?"dark":"light")});let u=[];async function Q(t=10){u=await G({limit:D(3,t,10),page:V(0,100)})}async function W(t=10){return u.length||await Q(),u.sort(()=>.5-Math.random()).slice(0,t)}function X(t){return{c:i,l:i,m:i,p:i,i,o:i,d:i}}function Y(t){let e,n;return e=new N({props:{animation:U,duration:450,gravity:1.45,snap:"center",thumbnail:!0,index:4,slides:t[0],arrows:!0}}),{c(){B(e.$$.fragment)},l(o){T(e.$$.fragment,o)},m(o,s){F(e,o,s),n=!0},p:i,i(o){n||(f(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){K(e,o)}}}function Z(t){return{c:i,l:i,m:i,p:i,i,o:i,d:i}}function z(t){let e,n,o,s={ctx:t,current:null,token:null,hasCatch:!1,pending:Z,then:Y,catch:X,value:0,blocks:[,,,]};return x(W(10),s),{c(){e=I(),n=A("main"),s.block.c(),this.h()},l(a){E('[data-svelte="svelte-r068pv"]',document.head).forEach(c),e=q(a),n=C(a,"MAIN",{class:!0});var l=P(n);s.block.l(l),l.forEach(c),this.h()},h(){document.title="Slidy 3.1.0 - SvelteKit",R(n,"class","svelte-gogyl2")},m(a,r){p(a,e,r),p(a,n,r),s.block.m(n,s.anchor=null),s.mount=()=>n,s.anchor=null,o=!0},p(a,[r]){t=a,j(s,t,r)},i(a){o||(f(s.block),o=!0)},o(a){for(let r=0;r<3;r+=1){const l=s.blocks[r];g(l)}o=!1},d(a){a&&c(e),a&&c(n),s.block.d(),s.token=null,s=null}}}class nt extends ${constructor(e){super(),M(this,e,null,z,S,{})}}export{nt as default};
