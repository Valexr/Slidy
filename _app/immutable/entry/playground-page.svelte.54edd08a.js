import{S as v,i as M,s as S,Q as x,a as A,k as E,O as R,h,c as B,l as C,m as I,n as P,b as p,R as j,g,d as _,N as s,y as q,z as H,A as N,B as W}from"../chunks/index.fd4466f2.js";import{S as F,F as K}from"../chunks/slidy.c3cf8cf5.js";const O=(e,t,n)=>Math.min(Math.max(e,t),n),Q=async({limit:e=5,width:t=window.innerWidth,height:n=window.innerHeight})=>{try{return await T(e,{width:t,height:n})}catch(a){console.error(`Could not fetch photos: ${a}`)}};async function T(e=9,t={width:window.innerWidth,height:window.innerHeight}){const n="https://raw.githubusercontent.com/Valexr/Slidy/master/assets/static/photos.json",a=Array.from({length:e},()=>Math.floor(Math.random()*24644));return(await(await fetch(n)).json()).reduce((c,[y,b,k],u)=>{if(a.includes(u)){const d={width:t.height*(b/10),height:t.height},m={width:t.width,height:t.height},$=`?w=${i(f(d,m).width)}`;c.push({id:u,src:`https://images.unsplash.com/photo-${y}${$}`,alt:`Image by ${k} from Unsplash`,...f(d,m)})}return c},[]);function i(c){return c*devicePixelRatio}}const f=(e,t)=>{const n=Math.min(t.width/e.width,t.height,e.height);return{width:Math.round(e.width*n),height:Math.round(e.height*n)}},w=!!globalThis.window,U=(e,t=new Set)=>{const n=o=>(t.add(o),o(e),()=>{t.delete(o)}),a=o=>t.forEach(i=>i(o));return[n,o=>a(e=o(e))]},V=w&&matchMedia("(prefers-color-scheme: dark)").matches,[D,et]=U(V);D(e=>{w&&document.documentElement.setAttribute("scheme",e?"dark":"light")});let l=[];async function G(e=10){l=await Q({limit:O(3,e,10)})}async function J(e=10){return l!=null&&l.length||await G(),l==null?void 0:l.sort(()=>.5-Math.random()).slice(0,e)}function L(e){return{c:s,l:s,m:s,p:s,i:s,o:s,d:s}}function X(e){let t,n;return t=new F({props:{animation:K,duration:450,gravity:1.45,snap:"center",thumbnail:!0,index:4,slides:e[0],arrows:!0}}),{c(){q(t.$$.fragment)},l(a){H(t.$$.fragment,a)},m(a,r){N(t,a,r),n=!0},p:s,i(a){n||(g(t.$$.fragment,a),n=!0)},o(a){_(t.$$.fragment,a),n=!1},d(a){W(t,a)}}}function Y(e){return{c:s,l:s,m:s,p:s,i:s,o:s,d:s}}function Z(e){let t,n,a,r={ctx:e,current:null,token:null,hasCatch:!1,pending:Y,then:X,catch:L,value:0,blocks:[,,,]};return x(J(10),r),{c(){t=A(),n=E("main"),r.block.c(),this.h()},l(o){R("svelte-r068pv",document.head).forEach(h),t=B(o),n=C(o,"MAIN",{class:!0});var c=I(n);r.block.l(c),c.forEach(h),this.h()},h(){document.title="Slidy 3.1.0 - SvelteKit",P(n,"class","svelte-gogyl2")},m(o,i){p(o,t,i),p(o,n,i),r.block.m(n,r.anchor=null),r.mount=()=>n,r.anchor=null,a=!0},p(o,[i]){e=o,j(r,e,i)},i(o){a||(g(r.block),a=!0)},o(o){for(let i=0;i<3;i+=1){const c=r.blocks[i];_(c)}a=!1},d(o){o&&h(t),o&&h(n),r.block.d(),r.token=null,r=null}}}class nt extends v{constructor(t){super(),M(this,t,null,Z,S,{})}}export{nt as default};
