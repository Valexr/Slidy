<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="utf-8" />
        <meta name="viewport"
            content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, viewport-fit=auto">
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
        <meta http-equiv="Pragma" content="no-cache" />
        <meta http-equiv="Expires" content="0" />

        <link href="assets/splashscreens/iphone5_splash.png"
            media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2)"
            rel="apple-touch-startup-image" />
        <link href="assets/splashscreens/iphone6_splash.png"
            media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2)"
            rel="apple-touch-startup-image" />
        <link href="assets/splashscreens/iphoneplus_splash.png"
            media="(device-width: 621px) and (device-height: 1104px) and (-webkit-device-pixel-ratio: 3)"
            rel="apple-touch-startup-image" />
        <link href="assets/splashscreens/iphonex_splash.png"
            media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3)"
            rel="apple-touch-startup-image" />
        <link href="assets/splashscreens/iphonexr_splash.png"
            media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2)"
            rel="apple-touch-startup-image" />
        <link href="assets/splashscreens/iphonexsmax_splash.png"
            media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3)"
            rel="apple-touch-startup-image" />
        <link href="assets/splashscreens/iphone12_splash.png"
            media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3)"
            rel="apple-touch-startup-image" />
        <link href="assets/splashscreens/ipad_splash.png"
            media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2)"
            rel="apple-touch-startup-image" />
        <link href="assets/splashscreens/ipadpro1_splash.png"
            media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2)"
            rel="apple-touch-startup-image" />
        <link href="assets/splashscreens/ipadpro3_splash.png"
            media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2)"
            rel="apple-touch-startup-image" />
        <link href="assets/splashscreens/ipadpro2_splash.png"
            media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2)"
            rel="apple-touch-startup-image" />

        <link rel="apple-touch-icon" type="image/png" sizes="any" href="assets/apple-touch-icon.png">
        <link rel="apple-touch-icon-precomposed" type="image/png" sizes="any"
            href="assets/apple-touch-icon-precomposed.png">
        <link rel="icon" type="image/png" href="assets/favicon.png" />
        <link rel="stylesheet" href="dev.css" />

        <title>Slidy 3.1.2 - NativeJS</title>
        <!-- <script type="module" src="https://unpkg.com/@slidy/media@1.2.2/dist/index.mjs"></script> -->
        <script type="module">
            import { slidy } from './build/core.js';
            // import { media } from './build/media.js';
            import * as utils from './utils.js';
            import { media } from 'https://unpkg.com/@slidy/media@1.2.2/dist/index.mjs';

            const queries = {
                xs: '(max-width: 480px)',
                sm: '(max-width: 600px)',
                md: '(max-width: 840px)',
                lg: '(max-width: 960px)',
                xl: '(max-width: 1280px)',
                xxl: '(min-width: 1281px)',
                landscape: '(orientation: landscape)',
                portrait: '(orientation: portrait)',
                dark: '(prefers-color-scheme: dark)',
                light: '(prefers-color-scheme: light)',
                mouse: '(hover: hover)',
                touch: '(hover: none)'
            };

            const mqs = media({ queries, getter: x => console.log('x:', x) });
            mqs.subscribe((matches) => {
                console.log('m:', matches);
                // window.media = matches;
            });

            window.Slidy = slidy;
            window.utils = utils;
            window.media = mqs.matches;
            window.options = {
                index: 7,
                length: 15,
                snap: 'center',
                loop: false,
                clamp: false,
                gravity: 1.2,
                duration: 375,
                vertical: false,
            };

            console.log('module:', media.matches, window.media);
            // console.log(window['slidy-logo']); // get Node by id
        </script>
    </head>

    <body>
        <header>
            <img id="slidy-logo" alt="Slidy" width="50" height="50" src="assets/favicon.png" />
            <h3>
                Slidy <span>3.1.2</span><sub>nativeJS</sub><sub id="stats" />
            </h3>
            <button id="dark" onclick="utils.activate(this, dark)">dark</button>
        </header>
        <main id="main" style="--gap: 2rem; --flow: row; --width: auto; --height: 375px">
            <ul id="slidy">
                <!-- <li id="0"><img src="https://picsum.photos/id/10/1280/800.jpg" alt="alt" /></li>
                <li id="1"><img src="https://picsum.photos/id/11/1280/800.jpg" alt="alt" /></li>
                <li id="2"><img src="https://picsum.photos/id/12/1280/800.jpg" alt="alt" /></li>
                <li id="3"><img src="https://picsum.photos/id/13/1280/800.jpg" alt="alt" /></li>
                <li id="4"><img src="https://picsum.photos/id/14/1280/800.jpg" alt="alt" /></li> -->
                <li style="display: grid; place-items: center">Loading... üöÄ</li>
            </ul>
        </main>
        <nav id="thumbs"></nav>
        <footer>
            <nav id="buttons">
                <button id="clamp" onclick="slidy.update({clamp: utils.activate(this, options.clamp)})">clamp</button>
                <button id="loop" onclick="slidy.update({loop: utils.activate(this, options.loop)})">loop</button>
                <button id="vertical" onclick="slidy.update({vertical: utils.activate(this, options.vertical)})">
                    vertical
                </button>
            </nav>

            <nav>
                <button id="prev" onclick="slidy.to(options.index - 1)">‚Üê</button>
                <button id="reload" onclick="utils.getPhotos(node, utils.randomQ(1, 69), options.length)">
                    <i class="icon icon-refresh"></i>
                </button>
                <button id="next" onclick="slidy.to(options.index + 1)">‚Üí</button>
            </nav>

            <nav id="dots"></nav>

            <form>
                <fieldset>
                    <label title="length">
                        <input onchange="utils.changeValue(this, options)" name="length" type="number" size="1" step="1"
                            min="1" max="50" />
                    </label>
                    <label title="width">
                        <input onchange="utils.setVar(main, this.name, this.value)" name="width" size="5" />
                    </label>
                    <label title="height">
                        <input onchange="utils.setVar(main, this.name, this.value)" name="height" size="5" />
                    </label>
                    <label title="gap">
                        <input onchange="utils.setVar(main, this.name, this.value)" name="gap" size="5" />
                    </label>
                    <label title="duration">
                        <input onchange="utils.changeValue(this, options)" name="duration" type="number" size="2"
                            step="1" min="100" max="1000" />
                    </label>
                    <label title="gravity">
                        <input onchange="utils.changeValue(this, options)" name="gravity" type="number" size="1"
                            step="0.1" min="0.1" max="2" />
                    </label>
                    <label title="align">
                        <select value="center" name="snap" onchange="utils.changeValue(this, options)">
                            <option value="">unset</option>
                            <option value="start">‚Üê start</option>
                            <option value="center">center</option>
                            <option value="end">end ‚Üí</option>
                        </select>
                    </label>
                </fieldset>
            </form>
            <form>
                <fieldset>
                    <label title="range">
                        <input oninput="utils.changeValue(this, options)" name="index" type="range" step="1" min="0"
                            max="4" />
                    </label>
                </fieldset>
            </form>
        </footer>

        <article>
            <h1>HTML Ipsum Presents</h1>

            <p>
                <strong>Pellentesque habitant morbi tristique</strong> senectus et netus et malesuada fames ac turpis
                egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero
                sit amet quam egestas semper. <em>Aenean ultricies mi vitae est.</em> Mauris placerat eleifend leo.
                Quisque sit amet est et sapien ullamcorper pharetra. Vestibulum erat wisi, condimentum sed,
                <code>commodo vitae</code>, ornare sit amet, wisi. Aenean fermentum, elit eget tincidunt condimentum,
                eros ipsum rutrum orci, sagittis tempus lacus enim ac dui. <a href="#">Donec non enim</a> in turpis
                pulvinar facilisis. Ut felis.
            </p>

            <h2>Header Level 2</h2>

            <ol>
                <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</li>
                <li>Aliquam tincidunt mauris eu risus.</li>
            </ol>

            <blockquote>
                <p>
                    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus magna. Cras in mi at felis aliquet
                    congue. Ut a est eget ligula molestie gravida. Curabitur massa. Donec eleifend, libero at sagittis
                    mollis, tellus est malesuada tellus, at luctus turpis elit sit amet quam. Vivamus pretium ornare
                    est.
                </p>
            </blockquote>

            <h3>Header Level 3</h3>

            <ul>
                <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</li>
                <li>Aliquam tincidunt mauris eu risus.</li>
            </ul>

            <pre><code>
            #header h1 a {
              display: block;
              width: 300px;
              height: 80px;
            }
            </code></pre>
        </article>

        <script>
            let position = 0,
                slidy = null,
                slidyT = null,
                dark = false;

            const node = document.querySelector('#slidy'),
                buttons = document.querySelectorAll('button'),
                inputs = document.querySelectorAll('input'),
                select = document.querySelector('select');

            window.onload = () => {
                console.log(window);
                // dark = media.dark;
                utils.getPhotos(node, utils.randomQ(1, 69), options.length);

                node.addEventListener('mount', (e) => {
                    console.log(e);
                    options = e.detail.options;

                    for (const button of buttons) {
                        if (options[button.id] || (button.id === 'dark' && dark)) button.classList.add('active');
                    }
                    for (const input of inputs) {
                        if (input.name in options) input.value = options[input.name];
                        else if (input.name === 'width') input.value = utils.getVar(main, '--width');
                        else if (input.name === 'height') input.value = utils.getVar(main, '--height');
                        else if (input.name === 'gap') input.value = utils.getVar(main, '--gap');
                        else if (input.name === 'index') input.max = options.length - 1;
                    }
                    select.value = options.snap;
                });
                node.addEventListener('move', (e) => {
                    utils.indexing(e.detail.index);
                    utils.scrolling(e.detail.position);
                    slidyT.to(e.detail.index);
                    // console.log(e);
                });
                node.addEventListener('resize', (e) => {
                    // console.log(e);
                    // media.sm && console.log(media);
                });
                node.addEventListener('update', (e) => {
                    // console.log(e);
                    // slidyT.to(x);
                });
                node.addEventListener('destroy', (e) => {
                    // console.log(e)
                });
            };
        </script>
    </body>

</html>