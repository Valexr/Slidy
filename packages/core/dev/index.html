<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="utf-8" />
        <meta name="viewport"
            content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, viewport-fit=auto" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
        <meta http-equiv="Pragma" content="no-cache" />
        <meta http-equiv="Expires" content="0" />

        <link href="assets/splashscreens/iphone5_splash.png"
            media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2)"
            rel="apple-touch-startup-image" />
        <link href="assets/splashscreens/iphone6_splash.png"
            media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2)"
            rel="apple-touch-startup-image" />
        <link href="assets/splashscreens/iphoneplus_splash.png"
            media="(device-width: 621px) and (device-height: 1104px) and (-webkit-device-pixel-ratio: 3)"
            rel="apple-touch-startup-image" />
        <link href="assets/splashscreens/iphonex_splash.png"
            media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3)"
            rel="apple-touch-startup-image" />
        <link href="assets/splashscreens/iphonexr_splash.png"
            media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2)"
            rel="apple-touch-startup-image" />
        <link href="assets/splashscreens/iphonexsmax_splash.png"
            media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3)"
            rel="apple-touch-startup-image" />
        <link href="assets/splashscreens/iphone12_splash.png"
            media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3)"
            rel="apple-touch-startup-image" />
        <link href="assets/splashscreens/ipad_splash.png"
            media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2)"
            rel="apple-touch-startup-image" />
        <link href="assets/splashscreens/ipadpro1_splash.png"
            media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2)"
            rel="apple-touch-startup-image" />
        <link href="assets/splashscreens/ipadpro3_splash.png"
            media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2)"
            rel="apple-touch-startup-image" />
        <link href="assets/splashscreens/ipadpro2_splash.png"
            media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2)"
            rel="apple-touch-startup-image" />

        <link rel="apple-touch-icon" type="image/png" sizes="any" href="assets/apple-touch-icon.png" />
        <link rel="apple-touch-icon-precomposed" type="image/png" sizes="any"
            href="assets/apple-touch-icon-precomposed.png" />
        <link rel="icon" type="image/png" href="assets/favicon.png" />
        <link rel="stylesheet" href="dev.css" />

        <title id="title"></title>

        <script type="module">
            import { media as mediaStorage } from './build/media.js';
            import * as easings from './build/easing.js';
            import * as utils from './utils.js';
            import { getPhotos } from './api.js';
            import { setEvents } from './env.js';

            const queries = {
                xs: '(max-width: 480px)',
                sm: '(max-width: 600px)',
                md: '(max-width: 840px)',
                lg: '(max-width: 960px)',
                xl: '(max-width: 1280px)',
                xxl: '(min-width: 1281px)',
                landscape: '(orientation: landscape)',
                portrait: '(orientation: portrait)',
                dark: '(prefers-color-scheme: dark)',
                light: '(prefers-color-scheme: light)',
                mouse: '(hover: hover)',
                touch: '(hover: none)',
            };

            const mediaQ = mediaStorage({ queries });
            mediaQ.subscribe((matches) => {
                window.media = matches;
            });

            window.utils = utils;
            window.easings = easings;
            window.options = {
                index: 4,
                clamp: 0,
                indent: 1,
                length: 9,
                sensity: 1,
                gravity: 1.2,
                duration: 375,
                loop: false,
                vertical: false,
                snap: 'center',
            };
            window.position = 0;
            window.slidy = null;
            window.slidyT = null;
            window.getPhotos = getPhotos;
            window.changing = false;
            window.input = (node) => {
                changing = true;
                slidy.to(node.value);
            };
            window.change = () => {
                changing = !changing;
            };

            console.log('window:', window);

            fetch('https://unpkg.com/@slidy/core/package.json')
                .then(async (res) => await res.json())
                .then(({ version }) => {
                    title.innerText = `Slidy ${version} - NativeJS`;
                    header.innerHTML = `Slidy <span>${version}</span><sub>nativeJS</sub><sub id="stats" />`;
                    getPhotos(node, utils.randomQ(1, 69), options.length).then(setEvents);
                });
        </script>
    </head>

    <body>
        <header>
            <img id="slidy-logo" alt="Slidy" width="50" height="50" src="assets/favicon.png" />
            <h3 id="header"></h3>
            <a href="https://github.com/Valexr/Slidy" id="github">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"
                        fill="currentColor" />
                </svg>
            </a>
        </header>
        <main id="main" style="--gap: 2rem; --flow: row; --width: auto; --height: 375px">
            <ul id="node" tabindex="0">
                <!-- <li id="0"><img src="https://picsum.photos/id/10/1280/800.jpg" alt="alt" /></li>
                <li id="1"><img src="https://picsum.photos/id/11/1280/800.jpg" alt="alt" /></li>
                <li id="2"><img src="https://picsum.photos/id/12/1280/800.jpg" alt="alt" /></li>
                <li id="3"><img src="https://picsum.photos/id/13/1280/800.jpg" alt="alt" /></li>
                <li id="4"><img src="https://picsum.photos/id/14/1280/800.jpg" alt="alt" /></li>
                <li id="5"><img src="https://picsum.photos/id/15/1280/800.jpg" alt="alt" /></li>
                <li id="6"><img src="https://picsum.photos/id/17/1280/800.jpg" alt="alt" /></li>
                <li id="7"><img src="https://picsum.photos/id/18/1280/800.jpg" alt="alt" /></li>
                <li id="8"><img src="https://picsum.photos/id/19/1280/800.jpg" alt="alt" /></li> -->
                <!-- <li style="display: grid; place-items: center">Loading... üöÄ</li> -->
            </ul>
        </main>

        <nav id="thumbs"></nav>

        <footer>
            <nav>
                <button id="prev" onclick="slidy.to(options.index - 1)">‚Üê</button>
                <button id="reload" onclick="getPhotos(node, utils.randomQ(1, 69), options.length)">
                    <i class="icon icon-refresh"></i>
                </button>
                <button id="next" onclick="slidy.to(options.index + 1)">‚Üí</button>
            </nav>

            <nav id="dots"></nav>

            <nav id="buttons">
                <button id="loop" onclick="slidy.update({ loop: options.loop = !options.loop })">
                    loop
                </button>
                <button id="vertical" onclick="slidy.update({ vertical: options.vertical = !options.vertical})">
                    vertical
                </button>
            </nav>

            <form>
                <fieldset>
                    <label title="snap">
                        <select id="snap" name="snap" onchange="slidy.update({ snap: this.value })"></select>
                    </label>
                    <label title="easing">
                        <select id="easing" name="easing"
                            onchange="slidy.update({ easing: easings[this.value] })"></select>
                    </label>
                </fieldset>
            </form>

            <form>
                <fieldset>
                    <label title="clamp">
                        <input id="clamp" onchange="slidy.update({ clamp: +this.value })" name="clamp" type="number"
                            size="1" step="1" min="0" max="3" />
                    </label>
                    <label title="sensity">
                        <input id="sensity" onchange="slidy.update({ sensity: +this.value })" name="sensity"
                            type="number" size="2" step="1" min="0" max="100" />
                    </label>
                    <label title="indent">
                        <input id="indent" onchange="slidy.update({ indent: +this.value })" name="indent" type="number"
                            size="1" step="0.1" min="-2" max="2" />
                    </label>
                    <label title="duration">
                        <input id="duration" onchange="slidy.update({ duration: +this.value })" name="duration"
                            type="number" size="2" step="1" min="100" max="1000" />
                    </label>
                    <label title="gravity">
                        <input id="gravity" onchange="slidy.update({ gravity: +this.value })" name="gravity"
                            type="number" size="1" step="0.1" min="0.1" max="2" />
                    </label>
                </fieldset>
            </form>

            <form>
                <fieldset>
                    <label title="length">
                        <input id="length" onchange="utils.changeLength(this)" name="length" type="number" size="1"
                            step="1" min="1" max="50" />
                    </label>
                    <label title="width">
                        <input onchange="utils.setVar(this)" name="width" size="4" />
                    </label>
                    <label title="height">
                        <input onchange="utils.setVar(this)" name="height" size="5" />
                    </label>
                    <label title="gap">
                        <input onchange="utils.setVar(this)" name="gap" size="4" />
                    </label>
                </fieldset>
            </form>

            <form>
                <fieldset>
                    <label title="range">
                        <input onchange="change(this)" oninput="input(this)" name="index" type="range" step="1" min="0"
                            max="4" />
                    </label>
                </fieldset>
            </form>
        </footer>

        <article>
            <h1>HTML Ipsum Presents</h1>

            <p>
                <strong>Pellentesque habitant morbi tristique</strong> senectus et netus et
                malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies
                eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper.
                <em>Aenean ultricies mi vitae est.</em> Mauris placerat eleifend leo. Quisque sit
                amet est et sapien ullamcorper pharetra. Vestibulum erat wisi, condimentum sed,
                <code>commodo vitae</code>, ornare sit amet, wisi. Aenean fermentum, elit eget
                tincidunt condimentum, eros ipsum rutrum orci, sagittis tempus lacus enim ac dui.
                <a href="#">Donec non enim</a> in turpis pulvinar facilisis. Ut felis.
            </p>

            <h2>Header Level 2</h2>

            <ol>
                <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</li>
                <li>Aliquam tincidunt mauris eu risus.</li>
            </ol>

            <blockquote>
                <p>
                    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus magna. Cras in
                    mi at felis aliquet congue. Ut a est eget ligula molestie gravida. Curabitur
                    massa. Donec eleifend, libero at sagittis mollis, tellus est malesuada tellus,
                    at luctus turpis elit sit amet quam. Vivamus pretium ornare est.
                </p>
            </blockquote>

            <h3>Header Level 3</h3>

            <ul>
                <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</li>
                <li>Aliquam tincidunt mauris eu risus.</li>
            </ul>

            <pre><code>
            #header h1 a {
              display: block;
              width: 300px;
              height: 80px;
            }
            </code></pre>
        </article>
    </body>

</html>