var Slidy=(()=>{var I=Object.defineProperty;var ue=Object.getOwnPropertyDescriptor;var me=Object.getOwnPropertyNames;var fe=Object.prototype.hasOwnProperty;var he=e=>I(e,"__esModule",{value:!0});var de=(e,n)=>{for(var i in n)I(e,i,{get:n[i],enumerable:!0})},Ee=(e,n,i,r)=>{if(n&&typeof n=="object"||typeof n=="function")for(let o of me(n))!fe.call(e,o)&&(i||o!=="default")&&I(e,o,{get:()=>n[o],enumerable:!(r=ue(n,o))||r.enumerable});return e};var ve=(e=>(n,i)=>e&&e.get(n)||(i=Ee(he({}),n,1),e&&e.set(n,i),i))(typeof WeakMap!="undefined"?new WeakMap:0);var Te={};de(Te,{slidy:()=>Le});function U(e){return new Promise((n,i)=>{let r,o=0;clearInterval(r),r=setInterval(()=>{o++,console.log(o,e.children.length),e.children.length>2?(clearInterval(r),Array.from(e.children).forEach((l,f)=>{l.dataset.index=f}),n(e.children)):o>=69&&(clearInterval(r),i("Slidy haven't items"))},16)})}function O(e,n,i){return Math.min(e,Math.max(n,i))||0}function W(e,n,i=!1){return i?n<0?y(e).length-1:n>y(e).length-1?0:n:O(y(e).length-1,0,n)}function v(e,n){return e.type==="wheel"?n==="y"||e.shiftKey?e.deltaY:e.deltaX:n==="y"?G(e).clientY:G(e).clientX}var G=e=>e.changedTouches?e.changedTouches[0]:e;var y=e=>Array.from(e.children),ye=(e,n)=>e.children[n];var be=e=>e==="y"?"offsetTop":"offsetLeft",D=e=>e==="y"?"offsetHeight":"offsetWidth",ge=e=>e==="middle"?.5:1,pe=(e,n)=>e!=="start"?n:0,Me=(e,n,i)=>e.parentElement[D(i)]-n[D(i)],K=(e,n,i,r,o=!1)=>n[be(i)]-pe(r,Me(e,n,i)*ge(r));function Q(e,n,i,r,o=!1){return y(e).reduce((l,f,T)=>{let h=p=>K(e,p,i,r,o);return Math.abs(h(f)-n)<Math.abs(h(l)-n)?f:l})}var E={index:(e,n,i,r,o,l=!1)=>i?y(e).indexOf(i):+Q(e,n,r,o,l).dataset.index,position:(e,n,i,r,o=!1)=>K(e,ye(e,n),i,r,o),target:(e,n,i,r,o=!1)=>K(e,Q(e,n,i,r,o),i,r,o),size:(e,n,i)=>y(e)[n][D(i)],child:(e,n)=>y(e).find(i=>+i.dataset.index===n)};var P=(e,n)=>e.slice(n).concat(e.slice(0,n));function B(e,n){let i=e.children[e.children.length-1];e.prepend(i)}function V(e,n){let i=e.children[0];e.append(i)}function Le(e,n={}){let{gap:i=0,index:r=0,axis:o="x",loop:l=!1,snap:f=!1,clamp:T=!1,gravity:h=1.2,duration:p=375,align:b="start",indexer:Z=t=>t,scroller:_=t=>t}=n,Y,j,w=0,$=0,u=0,x=0,ee,N,te=u,M=r,a=e.parentElement,X=Math.floor(e.children.length/2),H=requestAnimationFrame;U(e).then(t=>{console.log("mounted"),a&&(a.style.outline="none"),e.style.userSelect="none",e.style.touchAction="pan-y",e.style.pointerEvents="none",e.style.willChange="auto",e.style.webkitUserSelect="none",l&&(e.replaceChildren(...P(Array.from(t),r-X)),e.style.justifyContent="center"),m(r),a&&(a.onresize=()=>m(r),a.oncontextmenu=()=>g(),a.addEventListener("touchstart",A),a.addEventListener("mousedown",A),a.addEventListener("keydown",J),a.addEventListener("wheel",q))}).catch(t=>console.error(t));function C(t,s=0){u+=l?ne(t):t,r=E.index(e,u,void 0,o,b,l);let c=d=>d==="y"?`0, ${-u}px, 0`:`${-u}px, 0, 0`;e.style.transform=`translate3d(${c(o)})`,e.style.transition=`${s}ms`,e.dataset.position=`${u}`,e.dataset.index=`${r}`,Z(r),_(u)}function ne(t){let s=te-t,c=E.size(e,0,o),d=E.size(e,e.children.length-1,o),L=F=>(F+i)*Math.sign(-t);return M!==r&&(t>0?V(e,o):B(e,o),t+=L(t>0?c:d),x=u+t+s),M=r,t}function m(t,s=null){g(),t=M=W(e,t,l);let c=E.child(e,t),d=l?E.index(e,u,c,o,b,l):t,L=s?f?E.target(e,s,o,b,l):s:s===0?0:E.position(e,d,o,b,l);C(L-u,p)}function re(t){H(function s(c){let d=1e3*(u-x)/(1+(c-t));w=(2-h)*d+O(1,0,1-h)*w,t=c,x=u,j=H(s)})}function ie({target:t,amplitude:s,duration:c,timestamp:d}){s&&H(function L(F){let ae=(F-d)/c,S=s*Math.exp(-ae),ce=u-(t-S);C(l?S/16.7:-ce),Y=Math.abs(S)>.5?H(L):null,l&&Math.abs(S)<5&&m(r)})}function A(t){e.style.pointerEvents=t.type!=="mousedown"?"auto":"none",g(),x=u,$=v(t,o),re(performance.now()),window.addEventListener("mousemove",z),window.addEventListener("mouseup",R),window.addEventListener("touchmove",z),window.addEventListener("touchend",R)}function z(t){let s=($-v(t,o))*(2-h);$=v(t,o),C(s)}function R(t){g();let{target:s,amplitude:c}=oe(u);Math.abs(c)>10&&(Math.abs(w)<100?m(r):T?m(r,s):ie({target:s,amplitude:c,duration:p,timestamp:performance.now()}))}function oe(t){let s=(2-h)*w,c=f?E.target(e,t+s,o,b,l):t+s;return s=c-t,{target:c,amplitude:s}}let k=!1;function q(t){g(),k=!0,(Math.abs(v(t,"x"))&&Math.abs(v(t,"y"))<15||t.shiftKey)&&t.preventDefault(),C(v(t,o)*(2-h)),t.shiftKey?m(r-Math.sign(t.deltaY)):(f||T)&&(N=setTimeout(()=>(m(r),k=!1),100))}function J(t){t.key==="ArrowLeft"?m(r-1):t.key==="ArrowRight"&&m(r+1)}function g(){M=k?M:r,clearInterval(ee),clearTimeout(N),cancelAnimationFrame(Y),cancelAnimationFrame(j),window.removeEventListener("mousemove",z),window.removeEventListener("mouseup",R),window.removeEventListener("touchmove",z),window.removeEventListener("touchend",R)}function se(t){p=t.duration??375,h=O(2,0,t.gravity??1.2),o=t.axis??"x",b=t.align??"middle",f=t.snap??!0,T=t.clamp??!1,i=t.gap??0,r!==t.index&&(r=W(e,t.index??0,l),m(r)),l!==t.loop&&(console.log(Array.from(e.children)),l=t.loop??!1,l?(e.replaceChildren(...P(Array.from(e.children),r-X)),e.style.justifyContent="center",m(r)):(e.replaceChildren(...Array.from(e.children)),e.style.justifyContent="start",m(r)))}function le(){g(),a&&(a.onresize=null,a.oncontextmenu=null,a.removeEventListener("touchstart",A),a.removeEventListener("mousedown",A),a.removeEventListener("keydown",J),a.removeEventListener("wheel",q))}return{update:se,destroy:le,to:m}}return ve(Te);})();
